<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Quáº£n lÃ½ Há»c liá»‡u</title>
    <link rel="stylesheet" href="/static/css/style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <h1>
            Quáº£n lÃ½ Há»c liá»‡u TrÆ°á»ng SÄ© quan ChÃ­nh trá»‹
            <span class="header-badge">SQCT</span>
        </h1>
        <div class="user-info">
            <div class="user-profile">
                <div class="user-avatar">{{ user.full_name[0].upper() }}</div>
                <div>
                    <div style="font-weight: 600;">{{ user.full_name }}</div>
                    <div style="font-size: 12px; opacity: 0.9;">{{ user.role.value }}</div>
                </div>
            </div>
            <form method="POST" action="/api/logout" style="margin: 0;">
                <button type="submit" class="btn-logout">ÄÄƒng xuáº¥t</button>
            </form>
        </div>
    </header>

    <!-- Sidebar -->
    <aside class="sidebar">
        <div class="sidebar-header">
            <h2>Menu chÃ­nh</h2>
            <p>Äiá»u hÆ°á»›ng há»‡ thá»‘ng</p>
        </div>
        <div class="department-list">
            <a href="/dashboard" class="department-item active" style="text-decoration: none; color: inherit;">
                <span class="department-code">ğŸ“Š</span>
                <span class="department-name">Dashboard</span>
            </a>
            <a href="/materials" class="department-item" style="text-decoration: none; color: inherit;">
                <span class="department-code">ğŸ“š</span>
                <span class="department-name">Quáº£n lÃ½ Há»c liá»‡u</span>
            </a>
            <a href="/statistics" class="department-item" style="text-decoration: none; color: inherit;">
                <span class="department-code">ğŸ“ˆ</span>
                <span class="department-name">Thá»‘ng kÃª</span>
            </a>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
        <div class="content-header">
            <h2>ğŸ“Š Dashboard - Tá»•ng quan há»‡ thá»‘ng</h2>
        </div>

        <!-- Statistics Cards -->
        <div class="stats-grid">
            <div class="stat-card stat-card-primary">
                <div class="stat-icon">ğŸ“š</div>
                <div class="stat-info">
                    <h3 id="totalMaterials">0</h3>
                    <p>Tá»•ng sá»‘ há»c liá»‡u</p>
                </div>
            </div>

            <div class="stat-card stat-card-success">
                <div class="stat-icon">ğŸ‘¥</div>
                <div class="stat-info">
                    <h3 id="totalUsers">0</h3>
                    <p>Tá»•ng sá»‘ ngÆ°á»i dÃ¹ng</p>
                </div>
            </div>

            <div class="stat-card stat-card-info">
                <div class="stat-icon">ğŸ«</div>
                <div class="stat-info">
                    <h3 id="totalDepartments">0</h3>
                    <p>Sá»‘ khoa</p>
                </div>
            </div>

            <div class="stat-card stat-card-warning">
                <div class="stat-icon">ğŸ“…</div>
                <div class="stat-info">
                    <h3 id="materialsToday">0</h3>
                    <p>Há»c liá»‡u hÃ´m nay</p>
                </div>
            </div>
        </div>

        <!-- Weekly and Monthly Stats -->
        <div class="stats-grid-2">
            <div class="stat-card stat-card-secondary">
                <div class="stat-icon">ğŸ“†</div>
                <div class="stat-info">
                    <h3 id="materialsWeek">0</h3>
                    <p>Há»c liá»‡u tuáº§n nÃ y</p>
                </div>
            </div>

            <div class="stat-card stat-card-secondary">
                <div class="stat-icon">ğŸ—“ï¸</div>
                <div class="stat-info">
                    <h3 id="materialsMonth">0</h3>
                    <p>Há»c liá»‡u thÃ¡ng nÃ y</p>
                </div>
            </div>
        </div>

        <!-- Charts Section -->
        <div class="charts-container">
            <!-- Department Chart -->
            <div class="chart-card">
                <h3>ğŸ“Š Há»c liá»‡u theo Khoa</h3>
                <canvas id="departmentChart"></canvas>
            </div>

            <!-- Top Uploaders Chart -->
            <div class="chart-card">
                <h3>ğŸ‘‘ Top 5 ngÆ°á»i Ä‘Äƒng nhiá»u nháº¥t</h3>
                <canvas id="uploadersChart"></canvas>
            </div>
        </div>

        <!-- Recent Uploads Table -->
        <div class="recent-uploads-section">
            <h3>ğŸ•’ Há»c liá»‡u má»›i nháº¥t</h3>
            <table class="materials-table">
                <thead>
                    <tr>
                        <th>TiÃªu Ä‘á»</th>
                        <th>MÃ´n há»c</th>
                        <th>NgÆ°á»i Ä‘Äƒng</th>
                        <th>Khoa</th>
                        <th>NgÃ y Ä‘Äƒng</th>
                        <th>Thao tÃ¡c</th>
                    </tr>
                </thead>
                <tbody id="recentUploadsBody">
                    <tr>
                        <td colspan="6" style="text-align: center;">Äang táº£i...</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </main>

    <script src="/static/js/dashboard.js"></script>
</body>
</html>
