<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chi ti·∫øt H·ªçc li·ªáu - Tr∆∞·ªùng Sƒ© quan Ch√≠nh tr·ªã</title>
    <link rel="stylesheet" href="/static/css/style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <h1>
            Qu·∫£n l√Ω H·ªçc li·ªáu Tr∆∞·ªùng Sƒ© quan Ch√≠nh tr·ªã
            <span class="header-badge">SQCT</span>
        </h1>
        <div class="user-info">
            <div class="user-profile">
                <div class="user-avatar">{{ user.full_name[0].upper() }}</div>
                <div>
                    <div style="font-weight: 600;">{{ user.full_name }}</div>
                    <div style="font-size: 12px; opacity: 0.9;">{{ user.role.value }}</div>
                </div>
            </div>
            <form method="POST" action="/api/logout" style="margin: 0;">
                <button type="submit" class="btn-logout">ƒêƒÉng xu·∫•t</button>
            </form>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content" style="margin-left: 0;">
        <button class="btn-back" onclick="goBack()">
            ‚Üê Quay l·∫°i danh s√°ch
        </button>

        <div class="detail-container">
            <div class="detail-main">
                <div class="detail-header">
                    <h2 id="materialTitle">ƒêang t·∫£i...</h2>
                    <button id="deleteMaterialBtn" class="btn-delete" onclick="deleteMaterial()" style="display: none;">
                        X√≥a h·ªçc li·ªáu
                    </button>
                </div>

                <div class="files-section">
                    <h3>T√†i li·ªáu ƒë√≠nh k√®m</h3>
                    <div id="filesList">
                        <p style="color: #666;">ƒêang t·∫£i...</p>
                    </div>
                </div>
            </div>

            <div class="detail-sidebar">
                <h3 style="margin-bottom: 20px; color: var(--primary-color);">Th√¥ng tin</h3>
                <div class="info-item">
                    <strong>M√¥n h·ªçc:</strong>
                    <span id="materialSubject">-</span>
                </div>
                <div class="info-item">
                    <strong>Ch·ªß ƒë·ªÅ:</strong>
                    <span id="materialTopic">-</span>
                </div>
                <div class="info-item">
                    <strong>Khoa:</strong>
                    <span id="materialDepartment">-</span>
                </div>
                <div class="info-item">
                    <strong>Ng∆∞·ªùi ƒëƒÉng:</strong>
                    <span id="materialUploader">-</span>
                </div>
                <div class="info-item">
                    <strong>Ng√†y ƒëƒÉng:</strong>
                    <span id="materialDate">-</span>
                </div>
            </div>
        </div>
    </main>

    <!-- PDF Preview Overlay -->
    <div id="previewOverlay" class="preview-overlay">
        <div class="preview-modal">
            <div class="preview-header">
                <h4 id="previewFileName">Xem tr∆∞·ªõc PDF</h4>
                <div class="preview-controls">
                    <button id="prevPage" onclick="previousPage()">‚óÑ Tr∆∞·ªõc</button>
                    <span id="pageInfo"></span>
                    <button id="nextPage" onclick="nextPage()">Sau ‚ñ∫</button>
                    <button onclick="closePreview()">‚úï ƒê√≥ng</button>
                </div>
            </div>
            <div class="preview-body">
                <div id="loadingIndicator" class="loading-indicator">
                    <p>ƒêang t·∫£i PDF...</p>
                </div>
                <div id="pdfViewer" class="pdf-viewer"></div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer" style="margin-left: 0;">
        <div class="footer-content">
            <div class="footer-info">
                <div class="footer-section">
                    <h3>ƒê∆°n v·ªã ph√°t tri·ªÉn</h3>
                    <p>B·ªô m√¥n KHTN - Khoa VƒÉn h√≥a Ngo·∫°i ng·ªØ</p>
                    <p>Ban CNTT - Ph√≤ng Tham m∆∞u H√†nh ch√≠nh</p>
                    <p>Tr∆∞·ªùng Sƒ© quan Ch√≠nh tr·ªã</p>
                </div>
                
                <div class="footer-section">
                    <h3>Th√¥ng tin li√™n h·ªá</h3>
                    <div class="contact-info">
                        <span>üë®‚Äçüíª</span>
                        <p>Ph√°t tri·ªÉn b·ªüi: <strong>Ng√¥ H·ªìng Qu√¢n</strong></p>
                    </div>
                    <div class="contact-info">
                        <span>üì±</span>
                        <p>Zalo: <a href="https://zalo.me/0972424294">0972424294</a></p>
                    </div>
                </div>
                
                <div class="footer-section">
                    <h3>H·ªá th·ªëng</h3>
                    <p>H·ªá th·ªëng qu·∫£n l√Ω h·ªçc li·ªáu ƒëi·ªán t·ª≠</p>
                    <p>Phi√™n b·∫£n: 2.0.0</p>
                    <p>NƒÉm ph√°t tri·ªÉn: 2026</p>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p>&copy; 2026 Tr∆∞·ªùng Sƒ© quan Ch√≠nh tr·ªã. Ph√°t tri·ªÉn b·ªüi Ng√¥ H·ªìng Qu√¢n - B·ªô m√¥n KHTN.</p>
            </div>
        </div>
    </footer>

    <script>
        const currentUserRole = "{{ user.role.value }}";
        const currentUserId = {{ user.id }};
        const materialId = new URLSearchParams(window.location.search).get('id');
    </script>
    <script src="/static/js/detail.js"></script>
</body>
</html>
